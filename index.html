<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- link jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>

    <!-- we will need a h2 with a #display-number ID to show the countdown -->

    <div class="main-container">
        <h1 class="title">
            Rock and Roll Trivia!
        </h1>

        <button id="start-button">
            LETS PLAY!
        </button>

        <h2 id="time-remainging">
            Time Remaining:
            <span id="time">
                <!-- This will hold the countdown -->
            </span>
        </h2>

        <h2 id="question">
            <!-- quesiton will go here  -->
            <!-- The message for if you won or lost the game will go here also -->
        </h2>

        <div id="questions-answers">


            <!-- we will populate this question and answer button when we push start -->


        </div>
        <p id="correct-answer-message">
            <!-- we will display the correct answer message here if the user guessed correctly -->
        </p>

        <!-- we could display a gif here for every win or loss if we want -->
        <img src="" alt="">









    </div>

    <script type="text/javascript">

        $(document).ready(function () {

            // define my questions object 
            var myQuestions = [
                {
                    question: "Who is the answer?",
                    answers: {
                        a: "Rock and roll guy1",
                        b: "Rock and roll guy2",
                        c: "Rock and roll guy3",
                        d: "Rock and roll guy4"
                    },
                    correctAnswer: "c"
                },
                {
                    question: "What is the answer?",
                    answers: {
                        a: "Rock and roll thing1",
                        b: "Rock and roll thing2",
                        c: "Rock and roll thing3",
                        d: "Rock and roll thing4"
                    },
                    correctAnswer: "c"
                },
                {
                    question: "Where is the answer?",
                    answers: {
                        a: "Rock and roll place1",
                        b: "Rock and roll place2",
                        c: "Rock and roll place3",
                        d: "Rock and roll place4"
                    },
                    correctAnswer: "d"
                }
            ];

            // define global variables to be incremented and decremented 
            var questionsAsked = 0;
            var number = 6;
            var unanswered = 0;
            var correctAnswerCount = 0;
            var incorrectAnswerCount = 0;
            var intervalId;
            var i = 0;




            // create a function that will countdown (run and decrement take care of this)



            $("#start-button").on("click", function () {

                run();

            })

            // TIMETELLER FUNCTIONS

            function run() {
               
                console.log("Running! I = " + i)
                clearInterval(intervalId);
                intervalId = setInterval(decrement, 1000);
                if (questionsAsked === 3) {
                    $("#questions-answers").empty();
                    endGame();

                }
                else {
                    displayQuestionAndAnswers(i);
                }


            }

            function decrement() {
                number--;




                if (number < 0) {
                    stop();
                    i++;
                    questionsAsked++;
                    run();

                }

                $("#time").text(number);

            };

            // create a function to stop the timer and set it to zero 
            function stop() {
                clearInterval(intervalId);

                number = 6;
                unanswered++;

                // run();

            }



            // create a function to display question and answer buttons to DOM 
            function displayQuestionAndAnswers(qId) {



                $("#questions-answers").empty();
                let questionDisplay = $("#start-button").html(`<h2>${myQuestions[qId].question}</h2>`);
                let answerOne = $(`<button>${myQuestions[qId].answers.a}</button>`).addClass("answer-button").attr("data-name", "a");
                let answerTwo = $(`<button>${myQuestions[qId].answers.b}</button>`).addClass("answer-button").attr("data-name", "b");
                let answerThree = $(`<button>${myQuestions[qId].answers.c}</button>`).addClass("answer-button").attr("data-name", "c");
                let answerFour = $(`<button>${myQuestions[qId].answers.d}</button>`).addClass("answer-button").attr("data-name", "d");
                $("#questions-answers").append(questionDisplay, answerOne, answerTwo, answerThree, answerFour)



                $(document).on("click", ".answer-button", function () {
                            
                    if ($(this).attr("data-name") === myQuestions[i].correctAnswer) {
                        i++;
                        questionsAsked++;
                        correctAnswerCount++;


                        number = 6;
                        
                        console.log(i)

                        run();
                    }
                    else if ($(this).attr("data-name") !== myQuestions[i].correctAnswer) {
                        i++;
                        questionsAsked++;
                        incorrectAnswerCount++;


                        number = 6;
                        
                        console.log(i)

                        run();
                    }

                })

            }







            function initializeGame() {
                $("#questions-answers").empty();
                $("#correct-answer-message").empty();
                i = 0;
                questionsAsked = 0;
                incorrectAnswerCount = 0;
                correctAnswerCount = 0;
                unanswered = 0;
            }


            function endGame() {
                console.log("endgame");

                clearInterval(intervalId);


                number = 5;
                i = 0;



                $("#correct-answer-message").html("<h1>YOU LOSE!</h1>")
                $("#correct-answer-message").append(`<p>Incorrect Answers: ${incorrectAnswerCount}</p>`)
                $("#correct-answer-message").append(`<p>Correct Answers: ${correctAnswerCount}</p>`)
                $("#correct-answer-message").append(`<p>Unanswered Questions: ${unanswered}</p>`)
                $("#correct-answer-message").append("<button>Play Again?</button>").addClass("play-again")


                // this is not being heard??????
                $(".play-again").on("click", function () {
                    initializeGame();
                    console.log("playagain");
                    run();

                })



            }




            // end of document.ready function //

        })






    </script>

</body>

</html>